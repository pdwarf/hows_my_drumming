<% content_for :hide_navbar, true %>

<div class="container mx-auto px-4 py-8">
  <h1 class="text-3xl font-bold mb-2">How's my drumming?</h1>
  <p class="text-gray-600 mb-6">Hey, I'm <%= @user.email %>! Your feedback helps me improve. Tap an emoji to share your thoughts!</p>

  <% if @drum_session %>
    <div class="mb-8">
      <%= render "reactions/form", drum_session: @drum_session %>
    </div>

    <div class="mb-8">
      <h2 class="text-xl font-bold mb-2">Leave a Comment</h2>
      <%= render "comments/form", drum_session: @drum_session %>
    </div>

    <div class="mb-8">
      <h2 class="text-xl font-bold mb-2">Recent Feedback</h2>
      <div id="reaction-stats" class="grid grid-cols-2 gap-4 mb-6">
        <% reaction_stats(@reactions).each do |emoji, count| %>
          <div class="bg-gray-100 rounded-lg p-4 flex items-center justify-between">
            <span class="text-3xl"><%= emoji_for(emoji) %></span>
            <span class="text-2xl font-bold"><%= count %></span>
          </div>
        <% end %>
      </div>
      <div id="comments">
        <%= render @comments %>
      </div>
    </div>
  <% else %>
    <p class="text-xl text-center py-8">There is no active drumming session at the moment.</p>
  <% end %>
</div>